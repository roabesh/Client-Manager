# Сравнение решений для Client Manager

## 1. Структура таблиц

### Эталонное решение
- Таблица `clients`:
  - `id` (SERIAL PRIMARY KEY)
  - `name` (VARCHAR(40) NOT NULL)
  - `surname` (VARCHAR(40) NOT NULL)
  - `email` (VARCHAR(320) UNIQUE NOT NULL)
  - Валидация email через CHECK CONSTRAINT
- Таблица `telephones`:
  - `id` (SERIAL PRIMARY KEY)
  - `number` (INTEGER UNIQUE NOT NULL)
  - `client` (INTEGER NOT NULL REFERENCES clients)

### Наше решение
- Таблица `clients`:
  - `id` (SERIAL PRIMARY KEY)
  - `first_name` (VARCHAR(40) NOT NULL)
  - `last_name` (VARCHAR(40) NOT NULL)
  - `email` (VARCHAR(80) UNIQUE NOT NULL)
- Таблица `phones`:
  - `id` (SERIAL PRIMARY KEY)
  - `client_id` (INTEGER NOT NULL REFERENCES clients)
  - `phone` (VARCHAR(20))

## 2. Обработка ошибок

### Эталонное решение
- Проверка существования email перед добавлением клиента
- Проверка существования телефона перед добавлением
- Проверка существования клиента перед операциями
- Подробные сообщения об ошибках

### Наше решение
- Нет проверок на дубликаты
- Нет обработки ошибок
- Нет информативных сообщений

## 3. Функциональность

### Эталонное решение
- Использует `psycopg2.sql` для безопасного форматирования SQL
- Более гибкий поиск клиентов (FULL OUTER JOIN)
- Возвращает ID созданных записей

### Наше решение
- Более простая реализация
- Использует LEFT JOIN вместо FULL OUTER JOIN
- Нет возврата ID созданных записей

## 4. Структура кода

### Эталонное решение
- Функции принимают только необходимые параметры
- Использует контекстный менеджер для соединения
- Более компактные SQL-запросы

### Наше решение
- Функции принимают объект соединения как параметр
- Более длинные SQL-запросы
- Меньше оптимизации

## 5. Безопасность

### Эталонное решение
- Использует параметризованные запросы
- Валидация данных на уровне БД
- Безопасное форматирование SQL через `psycopg2.sql`

### Наше решение
- Тоже использует параметризованные запросы
- Нет валидации данных
- Нет защиты от SQL-инъекций при форматировании

## 6. Демонстрация работы

### Эталонное решение
- Более компактный демо-код
- Показывает обработку ошибок

### Наше решение
- Более подробный демо-код
- Показывает больше сценариев использования

## Рекомендации по улучшению нашего решения

1. Добавить валидацию email и других данных
2. Добавить обработку ошибок и проверки
3. Использовать `psycopg2.sql` для безопасного форматирования SQL
4. Добавить возврат ID созданных записей
5. Улучшить структуру поиска клиентов
6. Добавить информативные сообщения об ошибках
7. Оптимизировать SQL-запросы 